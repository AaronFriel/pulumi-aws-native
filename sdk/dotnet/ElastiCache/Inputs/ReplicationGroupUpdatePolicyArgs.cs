// *** WARNING: this file was generated by pulumigen. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.AwsNative.ElastiCache.Inputs
{

    /// <summary>
    /// The UpdatePolicy for a ReplicationGroup.
    /// </summary>
    public sealed class ReplicationGroupUpdatePolicyArgs : Pulumi.ResourceArgs
    {
        /// <summary>
        /// To modify a replication group's shards by adding or removing shards, rather than
        /// replacing the entire AWS::ElastiCache::ReplicationGroup resource, use the
        /// UseOnlineResharding update policy.
        /// 
        /// If UseOnlineResharding is set to true, you can update the NumNodeGroups and
        /// NodeGroupConfiguration properties of the AWS::ElastiCache::ReplicationGroup resource, and
        /// CloudFormation will update those properties without interruption. When UseOnlineResharding
        /// is set to false, or not specified, updating the NumNodeGroups and NodeGroupConfiguration
        /// properties results in CloudFormation replacing the entire
        /// AWS::ElastiCache::ReplicationGroup resource.
        /// 
        /// The UseOnlineResharding update policy has no properties.
        /// 
        /// Things to consider when setting the UseOnlineResharding update policy to true:
        /// 
        /// - We strongly recommend you perform updates to the NumNodeGroups and
        ///   NodeGroupConfiguration properties as the only updates in a given stack update operation.
        ///   Updating the node group configuration of a replication group is a resource-intensive
        ///   operation. If a stack update fails, CloudFormation does not roll back changes to the node
        ///   group configuration of a replication group. However, CloudFormation will roll back any
        ///   other properties that were changed as part of the failed update operation.
        /// - Any node group updates require identifying all node groups.  If you specify the
        ///   NodeGroupConfiguration property, you must also specify the NodeGroupId for each node group
        ///   configuration in order for CloudFormation to update the number of nodes without
        ///   interruption.  When creating a replication group, if you do not specify an ID for each
        ///   node group, ElastiCache automatically generates an ID for each node group. To update the
        ///   replication group without interruption, use the ElastiCache console
        ///   (https://console.aws.amazon.com/elasticache/) or DescribeReplicationGroups to retrieve the
        ///   IDs for all node groups in the replication group. Then specify the ID for each node group
        ///   in your stack template before attempting to add or remove shards.
        /// 
        ///   *Note*: As a best practice, when you create a replication group in a stack template,
        ///   include an ID for each node group you specify.
        /// 
        ///   In addition, updating the number of nodes without interruption requires that you have
        ///   accurately specified the PrimaryAvailabilityZone, ReplicaAvailabilityZones, and
        ///   ReplicaCount properties for each NodeGroupConfiguration as well. Again, you can use the
        ///   ElastiCache console (https://console.aws.amazon.com/elasticache/) or
        ///   DescribeReplicationGroups to retrieve the actual values for each node group and compare
        ///   them to the values in your stack template. You can update the property values of the
        ///   node groups as a separate stack update, or as part of the same stack update that changes
        ///   the number of node groups.  When you use an UseOnlineResharding update policy to update
        ///   the number of node groups without interruption, ElastiCache evenly distributes the
        ///   keyspaces between the specified number of slots. This cannot be updated later.
        ///   Therefore, after updating the number of node groups in this way, you should remove the
        ///   value specified for the Slots property of each NodeGroupConfiguration from the stack
        ///   template, as it no longer reflects the actual values in each node group.
        /// 
        /// - Actual node group removal results may vary.  When you specify a NumNodeGroups value that
        ///   is less than the current number of node groups, CloudFormation instructs ElastiCache to
        ///   remove as many node groups as necessary to reach the specified number of nodes. However,
        ///   ElastiCache may not always be able to remove the desired number of node groups. In the
        ///   event ElastiCache cannot remove the desired number of node groups, CloudFormation
        ///   generates a stack event alerting you to this. In cases where ElastiCache cannot remove any
        ///   node groups, the CloudFormation resource update fails.
        /// 
        /// For more information on modifying replication groups, see
        /// ModifyReplicationGroupShardConfiguration in the Amazon ElastiCache API Reference.
        /// </summary>
        [Input("UseOnlineResharding")]
        public Input<bool>? UseOnlineResharding { get; set; }

        public ReplicationGroupUpdatePolicyArgs()
        {
        }
    }
}
